(self.webpackChunkfe_proj=self.webpackChunkfe_proj||[]).push([[338],{49515:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});n(15144);var r,a=n(2307),u=(n(53294),n(56697)),i=(n(75314),n(11187)),l=(n(54277),n(74048)),c=(n(1025),n(65400)),o=(n(21249),n(67294)),d=n(59019),m=n(27484),s=n.n(m),f=(n(59567),n(8799)),p=(n(35797),n(64749)),E=(n(89858),n(51024)),v=n(28481),b=n(22122),h=(n(29809),n(97538)),k=(n(88674),n(41539),n(47941),o.forwardRef((function(e,t){return function(e,t){return o.createElement("div",{ref:t})}(0,t)})));!function(e){e.seller="seller",e.customer="customer"}(r||(r={}));var I=n(9669),y=n.n(I),Z=function(e){return y().post("/api/basic/user/create",e)},w=function(e){return y().post("/api/basic/user/update",e)},D=h.Z.Item;function x(e){var t=o.createRef();return new Promise((function(n){u.Z.confirm({title:"Add User",icon:o.createElement(o.Fragment,null),content:o.createElement(Y,(0,b.Z)({ref:t},e)),onOk:function(){return new Promise((function(e,r){var a;null===(a=t.current)||void 0===a||a.handleSubmit().then((function(t){(t.id?w:Z)(t).then((function(t){e(),n({action:"submit",result:t})})).catch((function(){r()}))})).catch((function(){r()}))}))}})}))}var Y=o.forwardRef((function(e,t){return function(e,t){var n=h.Z.useForm(),a=(0,v.Z)(n,1)[0],u=e.detail;return(0,o.useImperativeHandle)(t,(function(){return{handleSubmit:function(){return new Promise((function(e,t){a.validateFields().then((function(t){e(t)})).catch((function(){t()}))}))}}})),o.createElement(h.Z,{form:a,initialValues:u},o.createElement(D,{name:"id"},o.createElement(k,null)),o.createElement(D,{name:"name",label:"Name",rules:[{required:!0}]},o.createElement(E.Z,null)),o.createElement(D,{name:"email",label:"E-mail",rules:[{required:!0}]},o.createElement(E.Z,null)),o.createElement(D,{name:"type",label:"Type",rules:[{required:!0}]},o.createElement(p.default,null,Object.keys(r).map((function(e){return o.createElement(p.default.Option,{value:r[e],key:r[e]},r[e])})))),o.createElement(D,{name:"groupId",label:"Group",rules:[{required:!0}]},o.createElement(f.Z,null)))}(e,t)}));function g(){var e=(0,d.Z)((function(){return y().post("/api/basic/user/list",{})}),[]),t=e.value,n=void 0===t?[]:t,r=e.loading,m=e.retry,f=[{title:"ID",dataIndex:"id"},{title:"Name",dataIndex:"name"},{title:"Type",dataIndex:"type"},{title:"E-mail",dataIndex:"email"},{title:"Created At",dataIndex:"createdAt",render:function(e){return s()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Updated At",dataIndex:"updatedAt",render:function(e){return s()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"Action",dataIndex:"action",render:function(e,t){var n=[o.createElement(c.default,{key:"editBtn",onClick:function(){return function(e){x({detail:e}).then((function(e){var t=e.action,n=e.result;"submit"===t&&n&&(i.default.success("user ID: [".concat(n,"] updated")),m())}))}(t)}},"Edit"),o.createElement(c.default,{key:"deleteBtn",onClick:function(){return e=t.id,void u.Z.confirm({title:"Delete User",content:"Confirm to delete the user?",onOk:function(){var t;(t={id:e},y().post("/api/basic/user/delete",t)).then((function(){i.default.success("user ID: [".concat(e,"] deleted")),m()}))}});var e}},"Delete")];return o.createElement(l.default,null,n.map((function(e){return e})))}}];return o.createElement("div",null,o.createElement("div",{className:"mb-4 text-lg"},"This page shows a simple user-management demo with nodejs backend."),o.createElement("div",{className:"mb-4"},o.createElement(c.default,{type:"primary",onClick:function(){x({}).then((function(e){var t=e.action,n=e.result;"submit"===t&&n&&(i.default.success("user ID: [".concat(n,"] created")),m())}))}},"Add User")),o.createElement(a.Z,{rowKey:"id",loading:r,dataSource:n||[],columns:f}))}}}]);